{% extends "base.html" %}

{% block title %}Add Row - {{ list.name }}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 py-8">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">Add Row to {{ list.name }}</h1>
        <p class="text-gray-600">Enter data for each column</p>
    </div>

    <div class="bg-white rounded-lg shadow-md p-6">
        <form method="post">
            {% csrf_token %}
            <div class="space-y-6">
                {% for column in columns %}
                <div>
                    <label for="column_{{ column.pk }}" class="block text-sm font-medium text-gray-700 mb-2">
                        {{ column.name }}
                        {% if column.required %}<span class="text-red-500">*</span>{% endif %}
                        <span class="text-xs text-gray-500">({{ column.get_column_type_display }})</span>
                    </label>

                    {% if column.column_type == 'text' %}
                        <input type="text" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                               {% if column.required %}required{% endif %}
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                               placeholder="Enter {{ column.name|lower }}">

                    {% elif column.column_type == 'number' %}
                        <input type="number" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                               {% if column.required %}required{% endif %}
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                               placeholder="Enter a number">

                    {% elif column.column_type == 'date' %}
                        <input type="date" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                               {% if column.required %}required{% endif %}
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">

                    {% elif column.column_type == 'boolean' %}
                        <div class="flex items-center">
                            <input type="checkbox" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                                   class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
                            <label for="column_{{ column.pk }}" class="ml-2 text-sm text-gray-700">Checked</label>
                        </div>

                    {% elif column.column_type == 'select' %}
                        <select id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                                {% if column.required %}required{% endif %}
                                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500">
                            <option value="">Select...</option>
                            {% for option in column.options %}
                            <option value="{{ option }}">{{ option }}</option>
                            {% endfor %}
                        </select>

                    {% elif column.column_type == 'multi_select' %}
                        <input type="text" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                               placeholder="tag1, tag2, tag3">
                        <p class="mt-1 text-sm text-gray-500">Enter tags separated by commas</p>

                    {% elif column.column_type == 'url' %}
                        <input type="url" id="column_{{ column.pk }}" name="column_{{ column.pk }}"
                               {% if column.required %}required{% endif %}
                               class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"
                               placeholder="https://example.com">

                    {% elif column.column_type == 'json' %}
                        <textarea id="column_{{ column.pk }}" name="column_{{ column.pk }}" rows="3"
                                  {% if column.required %}required{% endif %}
                                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 font-mono text-sm"
                                  placeholder='{"key": "value"} or ["item1", "item2"]'></textarea>
                        <p class="mt-1 text-sm text-gray-500">Enter valid JSON (object or array)</p>
                    {% endif %}
                </div>
                {% endfor %}

                <div class="flex justify-end space-x-4">
                    <a href="{% url 'list_detail' list.pk %}"
                       class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-lg transition-colors duration-200">
                        Cancel
                    </a>
                    <button type="submit"
                            class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-colors duration-200">
                        Add Row
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}